import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.*;

class Day7Test {

    public static final String INPUT = """
            .......S.......
            ...............
            .......^.......
            ...............
            ......^.^......
            ...............
            .....^.^.^.....
            ...............
            ....^.^...^....
            ...............
            ...^.^...^.^...
            ...............
            ..^...^.....^..
            ...............
            .^.^.^.^.^...^.
            ...............""";

    public static final String FINAL_INPUT = """
            ......................................................................S......................................................................
            .............................................................................................................................................
            ......................................................................^......................................................................
            .............................................................................................................................................
            .....................................................................^.^.....................................................................
            .............................................................................................................................................
            ....................................................................^.^.^....................................................................
            .............................................................................................................................................
            ...................................................................^.^.^.^...................................................................
            .............................................................................................................................................
            ..................................................................^.^.^.^.^..................................................................
            .............................................................................................................................................
            .................................................................^.^...^...^.................................................................
            .............................................................................................................................................
            ................................................................^.^.^.^...^.^................................................................
            .............................................................................................................................................
            ...............................................................^.^.^...^.^.^.^...............................................................
            .............................................................................................................................................
            ..............................................................^.^.^.^.^.^.^.^.^..............................................................
            .............................................................................................................................................
            .............................................................^.^.^.^.^.....^...^.............................................................
            .............................................................................................................................................
            ............................................................^...^.^.^.^.......^.^............................................................
            .............................................................................................................................................
            ...........................................................^.....^...^.^.^.^.^...^...........................................................
            .............................................................................................................................................
            ..........................................................^.^...^.....^...^.....^.^..........................................................
            .............................................................................................................................................
            .........................................................^.....^.....^...^.^.^...^.^.........................................................
            .............................................................................................................................................
            ........................................................^...^.^...^.......^...^...^.^........................................................
            .............................................................................................................................................
            .......................................................^.^...^.....^.^.....^...^.^.^.^.......................................................
            .............................................................................................................................................
            ......................................................^.^.......^.....^.^.^.^.^.^...^.^......................................................
            .............................................................................................................................................
            .....................................................^.^...^.^.^.^.^.^...^.^.^...^.^.^.^.....................................................
            .............................................................................................................................................
            ....................................................^.^.^.^.^.^.^.....^.^.^.^.^.^.^.^.^.^....................................................
            .............................................................................................................................................
            ...................................................^...^.^.^.^.......^.^.^.^.^.^.^.^.^...^...................................................
            .............................................................................................................................................
            ..................................................^...^.....^.^.......^...^.^.^.^...^...^.^..................................................
            .............................................................................................................................................
            .................................................^.^.^.^.^.^.^.^.^.....^.^.^.....^...^...^.^.................................................
            .............................................................................................................................................
            ................................................^.^...^.^.....^.^.....^.^.....^...^.^...^.^.^................................................
            .............................................................................................................................................
            ...............................................^.^.....^.^.^.......^.^.^.^...^.^.....^.^...^.^...............................................
            .............................................................................................................................................
            ..............................................^.^.^.....^.....^.^...^.^...^.^.^.^.^.^.........^..............................................
            .............................................................................................................................................
            .............................................^.^.^...^.^.^...^.....^.^.^.^.^...^.....^.^.^.^.^.^.............................................
            .............................................................................................................................................
            ............................................^...^.^.^.^.....^.^.^.^.^.^...^.^.....^.^.^.^.^.^.^.^............................................
            .............................................................................................................................................
            ...........................................^.^.........^.....^.^...^.^...^.^.^...^.^...^.....^...^...........................................
            .............................................................................................................................................
            ..........................................^.^.....^.^.....^.^.^.^.^.^.^...^.^.^...^.^.^...^.^.^.^.^..........................................
            .............................................................................................................................................
            .........................................^.....^.^.^...............^.....^.^...^...^.^.^.^.^...^.^.^.........................................
            .............................................................................................................................................
            ........................................^.^.^.^.^.^.^.^.^.^.....^.^.....^.^.^.^.^.^...^.^.....^.^.^.^........................................
            .............................................................................................................................................
            .......................................^...^.^.^...^.^...^.^...^...........^.^.^.^.^.^...^...^.^.^.^.^.......................................
            .............................................................................................................................................
            ......................................^.^.^...^.^.^...^.^.^...^.^.^.^...^.^.....^.^...^.^.^.^.^.^.^.^.^......................................
            .............................................................................................................................................
            .....................................^.^.^.^.^.^.^.^.^...^...^.......^.^.^.^.^.....^...^...^.^.^.^...^.^.....................................
            .............................................................................................................................................
            ....................................^.^.^.^...^.^.^.^.^.^.^.^...^.^...^...^.....^...^.^.^...^.^.^.^.^.^.^....................................
            .............................................................................................................................................
            ...................................^...^.^...^...^.^...^.^...^.^.^.^.^.....^.^.^.^...^.^...^.^.^.^.^.^.^.^...................................
            .............................................................................................................................................
            ..................................^.^...^...^.^.^.^...^.^.^.^...^.^...^...^.^.....^...^.^.^.^...^...^.^.^.^..................................
            .............................................................................................................................................
            .................................^...^.^.....^.^.........^.^.^.^.....^.....^.....^...^.^...^.......^.^.....^.................................
            .............................................................................................................................................
            ................................^.^...^.....^...^.^.^.^.^.^.^...^.^...^.^.^.^.^.^...^.....^...^.^.^.^.^.^.^.^................................
            .............................................................................................................................................
            ...............................^...^.^.^.....^.....^.^...^.^.....^.^.^...^.^.^.^.^.^.^...^.......^.^.^.^.....^...............................
            .............................................................................................................................................
            ..............................^.^.^...^.^...^.........^.^.^.......^.^...^.^.^.^.^.^.^...^.....^.^...^.^.^.....^..............................
            .............................................................................................................................................
            .............................^.^.......^.^.....^...^...^.......^...^.^.......^...^.^.^...^.^.......^.^.^.^...^.^.............................
            .............................................................................................................................................
            ............................^.^.^.....^.^.^.^.^.^.^.^...^.^.^...^.....^.^.^.^.^.^.^.^...^.^.^.^.^.....^.^.^.^.^.^............................
            .............................................................................................................................................
            ...........................^...^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.^...^...^.^.^.^.^.^.^.^.^.^...^.^.^.^.^.^.^...........................
            .............................................................................................................................................
            ..........................^.^.^...^.^.^...^...^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.^...^.^.....^.....^.^.^...^...^.^.^.^..........................
            .............................................................................................................................................
            .........................^...^.^.^.^...^.^...^.^.^.^.^.^...^.^.^.^...^...^.....^.^.....^.^.^...^.^.^.^.^.^.....^.^.^.........................
            .............................................................................................................................................
            ........................^...^.^...^.^.^...^.^.^.^.^.^...^.^...^.^.^.^.^.^.^.......^...^...^.^...^.^...........^.^.^.^........................
            .............................................................................................................................................
            .......................^.^.^.....^.^.^.^.^.^.^...^.^.....^.^.^...^.^...^.^.^.^.^.^.^.^.^.^.....^.^...^...^.^...^.^.^.^.......................
            .............................................................................................................................................
            ......................^...^.^.^.^.^.^...^.^.....^.^.^.....^.^.^.^...^.^.^.^.^.^...^.....^.^.^...^.^...^.^.^.^.^.^.^...^......................
            .............................................................................................................................................
            .....................^.^.^...^.^...^.^...^.^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.........^.^.^.^.^.^...^.^.^.^...^...^.....^.^.....................
            .............................................................................................................................................
            ....................^...^...^.^.^.^...^.^.^.....^...^.^.^.^...^.^.^...^...^.^.....^.....^...^.^.^...^.....^.^.^.^.^.^.^.^....................
            .............................................................................................................................................
            ...................^.....^.^.^.^.^.........^.^.....^.^.^.^...^.......^.^.^...^.^.^.^.^.^...^.^.^.^...^.^.^.^.^.^.^...^.^.^...................
            .............................................................................................................................................
            ..................^.^.^.^.......^.^...^.^.^...^.^.^.^...^.^.^...^.^.^.....^.^.^.^.^.^.^.^.^.^...^.^.^.^.^.^.^...^.^.^.^.^.^..................
            .............................................................................................................................................
            .................^.........^.^.^...........^.^.^.....^.^.^...^.^.....^.^.^.....^.^.^.^.^.^.^.^.^...^.^.^.^.^.^...^.^.^.^.^.^.................
            .............................................................................................................................................
            ................^.^.^.^.^.^.^.^.^.^.^.^.^.^.....^.^...^.^.^.^.^...^.....^...^...^...^.....^.^.^.^.^.^.^.....^.^...........^.^................
            .............................................................................................................................................
            ...............^...^.......^.........^.^.^...^.^.^...^.^...^.....^...^.^.^.^...^.^.^.^.^...^...^.^...^...^.^.^...^.^.^...^.^.^...............
            .............................................................................................................................................
            ..............^.^.....^...^...^...^.^.^.^...^.....^.^.^...^.......^.^.^.^.....^.^.....^.^.^.^.^.....^.^.^.^.^...^.^.^.....^.^.^..............
            .............................................................................................................................................
            .............^.^...^.^...^.^.....^.^.....^.........^.^.^.^.^.^...^...^...^...^.^...^...^.^.^.^.^.^.....^.^...^...^...^.^.^.^...^.............
            .............................................................................................................................................
            ............^...^...^.^...^.^.....^...^.^.^.........^.^.^...^.^.^.^.......^.^.^.^...^.....^.^.^.^.^...^.^.^.^.....^.^.^.^.^...^.^............
            .............................................................................................................................................
            ...........^...^.^.^.^.^.^.^...^.^.^...^.....^.^...^...^...^...^.^...^.^.....^.^.^.^.^...^.^.^.^.^.^.^.........^...^.^.^...^.^.^.^...........
            .............................................................................................................................................
            ..........^.^.^.^.^.^.....^.^.^.^.^.^.^.....^...^...^.^...^...^.......^.^.^.^.^.....^.^...^...^.^.^.^...^...^...^.^.^.^.^...^.^...^..........
            .............................................................................................................................................
            .........^...^.^.^.^.^.^.^...^.^.^.^.^.^.^...^.^.......^.^.^.......^.^.^.....^...^.^...^.^.......^.^.^...........^.^...^.^...^.^...^.........
            .............................................................................................................................................
            ........^...^...^.^.^.^...^...........^.^.^.^.^.^...^...^.....^.^.^.^.....^.^.....^...^.^.^.^.^.^.^.....^.^.....^.^.^.^.^.....^.^.^.^........
            .............................................................................................................................................
            .......^.^.^.^.....^...^.^...^.....^.^.^...^.^.^.^.^.^...^.^...^.^.^.^.....^.......^.^.^...^.....^...^.^.^...^.^...^.....^...^...^...^.......
            .............................................................................................................................................
            ......^.....^.^.^.^.^.^.^.^.^.^...^.^.^...^...^.^.^.^.^.^.....^.............^.^.^.....^...^.^...^.^.^.^.....^.^.^.^.^...^.^.^.^.......^......
            .............................................................................................................................................
            .....^.^.^...^.^.^.^.^.^.^.....^...^...^.^.^.^...^.^.^...^...^.^.^.....^.^.^.^...^.^.......^.^.^...^.^.^.^...^...^.^.^...^...^.^.^.^.^.^.....
            .............................................................................................................................................
            ....^.^.^.^.^.^.^...^.^.^...^.^.^.^...^.^.^.^.^.^.^.^...^.^.....^.^...^.......^.^.....^...^.^.^.^.^.^.......^.^.^.^.^.^.^.^.^...^.......^....
            .............................................................................................................................................
            ...^.^.^.^.^...^.^.^.^...........^.^...^...^...^.^.^.^.^.^...^.^.^...^.^.^.^.^.......^.^.^.^.^.^.^.........^.^...^.^.^.^.^...^.^.^.^.^.^.^...
            .............................................................................................................................................
            ..^...^.^...^.......^.^.^.^.....^.^.^.....^.^.^...^.^.^.^...^.^.^.^...^.^.^.^.^.^.^.^...^.^.^...^.^...^.^.^.^...^.^.^...^.^...^.^...^.....^..
            .............................................................................................................................................
            .^.^.^.^.^.^.^.....^.^.^.^.^.^.^.^.^.^.^.^...^.^.......^...^.^.^.^...^.^.^...^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.^.^.^...^.^.^.^.....^.
            .............................................................................................................................................""";

    @Test
    void countBeamSplits() {
        var result = Day7.countBeamSplits(INPUT);
        assertEquals(21, result);
    }

    @Test
    void countBeamSplitsFinal() {
        var result = Day7.countBeamSplits(FINAL_INPUT);
        assertEquals(1587, result);
    }

    @Test
    void countBeamPaths() {
        var result = Day7.countBeamPaths(INPUT);
        assertEquals(40, result);
    }

    @Test
    void countBeamPathsFinal() {
        var result = Day7.countBeamPaths(FINAL_INPUT);
        assertEquals(5748679033029L, result);
    }
}